generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  userID    String   @id
  created_at DateTime @default(now())
  parts     UserPart[]
  fortresses Fortress[]
}

model Part {
  part_number    Int      @id
  shape          String
  material_number Int
  material       Material @relation(fields: [material_number], references: [material_number])
  userParts      UserPart[]
}

model Material {
  material_number Int      @id
  part_material   String
  parts           Part[]   // 逆リレーションを追加
}

model UserPart {
  id          Int   @id @default(autoincrement())
  user        User  @relation(fields: [userID], references: [userID])
  userID      String
  part        Part  @relation(fields: [part_number], references: [part_number])
  part_number Int
  domination  Float
  created_at  DateTime @default(now())
}

model Fortress {
  id                 Int     @id @default(autoincrement())
  user               User    @relation(fields: [userID], references: [userID])
  userID             String
  completed_fortress String
  created_at         DateTime @default(now())
}
